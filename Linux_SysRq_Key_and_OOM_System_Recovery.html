<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
        <link rel="icon" type="imag/x-icon" href="/mwiki/favicon.ico" >
    
    <title data-i18n="">MBook - Linux Magic SysRq Key and OOM</title>
    <meta name="description" content="Command for recovering frozen Linux machine using the SysRq keybinding." />
    <meta name=generator content="MWiki">
    
   
    
   <style>

@font-face {
    font-family: 'CMU Concrete';
    
    font-style: normal;
    
    
    
    src: url('/mwiki/static/fonts/cmu-concrete-regular.woff');
    
}
    


@font-face {
    font-family: 'CMU Concrete';
    
    font-style: italic;
    
    
    
    src: url('/mwiki/static/fonts/cmu-concrete-italic.woff');
    
}
    

@font-face {
    font-family: 'Libertinus Mono';
    
    
    
    src: url('/mwiki/static/fonts/LibertinusMono-Regular.woff2');
    
}
    

@font-face {
    font-family: 'Chicago MacOS';
    
    
    
    src: url('/mwiki/static/fonts/ChicagoFLF.ttf');
    
}
    

:root {
    /*--- Desktop screen Width ----------------*/
    --screen-width-desktop: 850px;

    /* --bg-sidebar: #F2EACA; */  /* #F7F4ED; */
    --bg-sidebar: white;  /* #F7F4ED; */
    /* --bg-main:   #F2EACA ; */
    --bg-main: white;
    --typography-main-line-height: 1.7em;
    --typography-main-leter-spacing: 0.5px;
    --screen-type: "desktop";
    --link-external-color: blue; /* hsl(0, 100%, 33%); */
    --link-internal-color: blue;
    --form-background-color: #fbfcfc;
    --form-border-color: #cfd5e2;
    --primary-button-background-color: #0172ad;


    
    --font-family-main: 'CMU Concrete';
    
    
    --font-family-title: 'Chicago MacOS';
    

    --font-size-h1:  1.800rem;
    --font-size-h2:  1.350rem;
    --font-size-h3:  1.125rem;
    --font-size-h4:  1.000rem;
    --font-size-h5:  0.875rem;
    --font-size-h6:  0.750rem;
    --font-size-text: 0.720rem;
    --font-size-code: 0.700rem;
    --font-size-sidebar: 0.850rem;

    --code-block-background-color: rgb(243, 244.5, 246.75);

    /* Magnifier icon */
    --icon-search: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='rgb(136, 145, 164)' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'%3E%3C/circle%3E%3Cline x1='21' y1='21' x2='16.65' y2='16.65'%3E%3C/line%3E%3C/svg%3E");
}


        
    </style>
  
    
    <link rel="stylesheet" href="/mwiki/static/static_style.css">
    
    
    
    <!-- MathJax Settings -->
    <script>

    const FONT_FAMILY_MAIN = "CMU Concrete"
    const FONT_FAMILY_TITLE = "Chicago MacOS"
    const FONT_FAMILY_CODE = "Libertinus Mono"
    const DEFAULT_LOCALE = "en-US";
	  const USE_DEFAULT_LOCALE = "True" === "True";
    const LATEX_RENDERER = "katex";
    const IS_LATEX_RENDERER_MATHJAX = LATEX_RENDERER === "mathjax";
    const IS_LATEX_RENDERER_KATEX   = LATEX_RENDERER === "katex";
    const KATEX_MACROS = "eyJcXGIiOiAiXFxtYXRoYmZ7IzF9IiwgIlxcYmhhdCI6ICJcXGhhdHtcXG1hdGhiZnsjMX19IiwgIlxcYmRvdCI6ICJcXGRvdHtcXG1hdGhiZnsjMX19IiwgIlxcYmRkb3QiOiAiXFxkZG90e1xcbWF0aGJmeyMxfX0iLCAiXFxicyI6ICJcXGJvbGRzeW1ib2x7IzF9IiwgIlxcYnNkb3QiOiAiXFxkb3R7XFxib2xkc3ltYm9seyMxfX0iLCAiXFxic2Rkb3QiOiAiXFxkZG90e1xcYm9sZHN5bWJvbHsjMX19IiwgIlxcZmIiOiAie31eeyMyfVxcbWF0aGJmeyMxfSIsICJcXGZiaGF0IjogInt9XnsjMn1cXGhhdHtcXG1hdGhiZnsjMX19IiwgIlxcZmJzIjogInt9XnsjMn1cXGJvbGRzeW1ib2x7IzF9IiwgImZyIjogInt9XnsjMX1feyMyfSIsICJcXHNrZXciOiAiXFxsZWZ0WyAjMSBcXHJpZ2h0XV97XFx0aW1lc30iLCAiXFxhcmdtYXgiOiAiXFxvcGVyYXRvcm5hbWUqe1xcbWF0aHJte1xcYXJnXFwsbWF4fSIsICJcXGFyZ21pbiI6ICJcXG9wZXJhdG9ybmFtZSp7XFxtYXRocm17XFxhcmdcXCxtaW59IiwgIlxcUiI6ICJ7IFxcbWF0aGJie1J9IH0iLCAiXFxaIjogIlxcbWF0aGJie1p9IiwgIlxcbGFwbGFjZSI6ICJcXG1hdGhjYWx7TH1cXGxlZnRcXHsjMVxccmlnaHRcXH0iLCAiXFxpbGFwbGFjZSI6ICJcXG1hdGhjYWx7TH1eey0xfVxcbGVmdFxceyMxXFxyaWdodFxcfSIsICJcXGZvdXJpZXIiOiAiXFxtYXRoY2Fse0Z9XFxsZWZ0XFx7IzFcXHJpZ2h0XFx9IiwgIlxcaWZvdXJpZXIiOiAiXFxtYXRoY2Fse0Z9XnstMX1cXGxlZnRcXHsjMVxccmlnaHRcXH0iLCAiXFxkIjogIlxcbWF0aHJte2R9IiwgIlxccCI6ICJcXHBhcnRpYWwiLCAiXFxlIjogIlxcbWF0aHJte2V9IiwgIlxcZHQiOiAiXFxmcmFje2QgIzF9e2R0fSIsICJcXGRkdCI6ICJcXGZyYWN7ZF4yICMxfXtkdF4yfSIsICJcXHBkIjogIlxcZnJhY3tcXHBhcnRpYWwgIzF9e1xccGFydGlhbCAjMn0iLCAiXFxwZGQiOiAiXFxmcmFje1xccGFydGlhbF4yICMxfXtcXHBhcnRpYWwgIzJeMn0iLCAiXFxDIjogInsgXFxtYXRoYmJ7Q30gfSIsICJcXEJpZ08iOiAiXFxtYXRoY2Fse099XFwhXFxsZWZ0KCMxXFxyaWdodCkiLCAiXFxtZGVmIjogIntcXHRyaWFuZ2xlcSBcXDt9IiwgIlxcc2duIjogIlxcb3BlcmF0b3JuYW1le3Nnbn0ifQ==";
    const CSRF_TOKEN = ""
    const STATIC_COMPILATION = true;
    const IS_USER_ADMIN = false;
    // NOTE: It is encoded as base64 
    const PAGE_SOURCE_CODE = "";
    const PAGE_SOURCE_URL  = "/mwiki/src_pages/Linux_SysRq_Key_and_OOM_System_Recovery.html"
	
    // Possible values: 'none', 'nosection' 'section', 'subsection'
    //  none      => no enumeration 
    //  nosection 
    //      Schema: <equation-number>
    //      Example: Equations are enumerated as 1, 2, ..., 200
    //              in the order that they are shown without section or 
    //              subsection number
    //  section   
    //      Schema:  => <section>.<equation-number>
    //      Exmaple: => 2.1, 2.5, 6.8
    //  subsection 
    //      Schema:  => <section>.<subsection>.<equation-number>
    //      Example: => 1.3.1 , 1.3.2, 2.4.5 
    //
    let equation_enumeration = "section";

    MathJax = {
        loader: {load: ['[tex]/tagformat', '[tex]/mathtools', 'output/chtml']}

      , section: 1
      , tex: {
          inlineMath: [['$','$'], ['\\(','\\)']]
        , displayMath: [['$$','$$'], ['\\[','\\]']]
        , processEscapes: true
        , processEnvironments: true
          // Location of equation numbers
        , tagSide: "right"  
        // Possible values 'ams' or 'all' (all equations are numbered by default)
        , tags: equation_enumeration !== "none" ? "all" : "ams"
        //, tags: 'ams'
        , packages: {'[+]': [
                                  'tagformat'
                                , 'sections'
                                , 'subsections'
                                , 'autoload-all'
                            ]}
        , tagformat: {
          number: (n) => { 
            if( equation_enumeration === "cont" 
                || equation_enumeration == "continuous")
            {
                return '' + n;
            }

            let nsec = MathJax.config.section;
            let nsub = MathJax.config.subsection;
            var out = '';
            if (nsub === 0 || equation_enumeration == "section") 
            {
                out = nsec + '.' + n;
            } else {
                out = nsec + '.' + nsub +  '.' + n;
            }
            // console.log("Display section = ", out);
            return out;
          }
        }
      }

     , startup: {

            ready() {
                // console.log(" [TRACE] I was called from ready()");
                const Configuration = MathJax._.input.tex.Configuration.Configuration;
                const CommandMap = MathJax._.input.tex.SymbolMap.CommandMap;
                new CommandMap('sections', {
                      nextSection: 'NextSection'
                    , setSection:  'SetSection'
                }, {
                     NextSection(parser, name) {
                        // console.log(" [TRACE] Called NextSection()");
                        MathJax.config.section++;
                        MathJax.config.subsection = 0;
                        parser.tags.counter = parser.tags.allCounter = 0;
                    }
                    , SetSection(parser, name) {
                        // console.log(" [TRACE] Called SetSection()");
                        const n = parser.GetArgument(name);
                        MathJax.config.section = parseInt(n);
                        parser.tags.counter = parser.tags.allCounter = 0;
                    }
                });
                if (equation_enumeration === "subsection")
                {
                    new CommandMap('subsections', {
                          nextSubSection: 'NextSubSection'
                        , setSubSection:  'SetSubSection'
                    }, {
                         NextSubSection(parser, name) {
                            // console.log(" [TRACE] NextSubSection() called.");
                            MathJax.config.subsection++;
                            parser.tags.counter = parser.tags.allCounter = 0;
                        }
                        , SetSubSection(parser, name) {
                            const n = parser.GetArgument(name);
                            // console.log(" [TRACE] SetSubSection to ", n);
                            MathJax.config.subsection = parseInt(n);
                            parser.tags.counter = parser.tags.allCounter = 0;
                        }
                    });
                }

                Configuration.create(
                      'sections', { handler: { macro: ['sections'] } }
                );

                if( equation_enumeration === "subsection" )
                {
                    Configuration.create(
                        'subsections', { handler: { macro: ['subsections'] } }
                    );

                }

                MathJax.startup.defaultReady();
                pseudocode.renderClass("pseudocode", { "lineNumber": true, "scopeLines": true });
                // This function is provided by main.js.
                if( isMobileScreen() ) { setHeadingVisibility(false); }
                /// setHeadingsVisibility(false)
            }
        }
    , chtml: {
        /// displayAlign: "left"
      }
    // options for when overflow is linebreak
    , linebreaks: {             
        inline:           true,   // true for browser-based breaking of inline equations
        width:            '100%', // a fixed size or a percentage of the container width
        lineleading:      .2,     // the default lineleading in em units
        LinebreakVisitor: null,   // The LinebreakVisitor to use
    },

    }
    </script>

    

    
        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.25/dist/katex.min.css" integrity="sha384-WcoG4HRXMzYzfCgiyfrySxx90XSl2rxY5mnVY5TwtWE6KLrArNKn0T/mOgNL0Mmi" crossorigin="anonymous">
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.25/dist/katex.min.js" integrity="sha384-J+9dG2KMoiR9hqcFao0IBLwxt6zpcyN68IgwzsCSkbreXUjmNVRhPFTssqdSGjwQ" crossorigin="anonymous"></script>
        <!-- <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.25/dist/contrib/auto-render.min.js" integrity="sha384-hCXGrW6PitJEwbkoStFjeJxv+fSOOQKOPbJxSfM6G5sWZjAyWhXiTIIAmQqnlLlh" crossorigin="anonymous" -->
            <!-- onload="renderMathInElement(document.body);"></script> -->
        
    
  

    
        <!-- Pseudocode.js (version 2.4.1) - Render LaTeX pseudocode code blocks.-->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pseudocode@2.4.1/build/pseudocode.min.css">
        <script src="https://cdn.jsdelivr.net/npm/pseudocode@2.4.1/build/pseudocode.min.js" async> </script>
    


    

    
    <!-- Additional Javascript libraries -->
    


    <script>

        document.addEventListener("DOMContentLoaded", (event) => {
            // Select graphviz code blocks 
            let lst = document.querySelectorAll(".graphviz-dot");
            for(let x of lst){

                Viz.instance().then(function(viz) {
                    // console.log("[TRACE] x = ", x);
                    let code = x.innerText;
                    // console.log(" [TRACE] code = ", code);
                    let svg = viz.renderSVGElement(code);
                    // console.log(" [TRACE] svg = ", svg);
                    x.replaceWith(svg); 
                    // x.outerHTML = svg;
                    /// document.getElementById("graph").appendChild(svg);
                });


            }
        }, false);
        
    </script>

    
    <script type="text/javascript" src="/mwiki/static/main.js"></script>
    

</head>

<body>

    
    <aside class="sidebar sidebar-visibility">
        
        <div class="toc">
            <!-- Table of contents template placeholder -->
            <ul>
            
                <ol>
                    
                        <span><a class="link-sidebar" href="#H_Overview">Overview</a> </span>
                    
                    
                </ol>
            
                <ol>
                    
                        <span><a class="link-sidebar" href="#H_SysRq_Settings">SysRq Settings</a> </span>
                    
                    
                        <div> 
                        <ul>
                        
                            <li><a class="link-sidebar" href="#H_Check_whether_SysRq_status">Check whether SysRq status</a></li>
                        
                            <li><a class="link-sidebar" href="#H_Set_SySrq_Value_without_reboot">Set SySrq Value without reboot</a></li>
                        
                            <li><a class="link-sidebar" href="#H_Persist_SysRq_Value_on_Reboot">Persist SysRq Value on Reboot</a></li>
                        
                        </ul>
                        </div>
                    
                </ol>
            
                <ol>
                    
                        <span><a class="link-sidebar" href="#H_Commands">Commands</a> </span>
                    
                    
                        <div> 
                        <ul>
                        
                            <li><a class="link-sidebar" href="#H_Unfreeze_Computer_in_OOM">Unfreeze Computer in OOM</a></li>
                        
                            <li><a class="link-sidebar" href="#H_Safe_System_Reboot">Safe System Reboot</a></li>
                        
                        </ul>
                        </div>
                    
                </ol>
            
                <ol>
                    
                        <span><a class="link-sidebar" href="#H_See">See</a> </span>
                    
                    
                </ol>
            
            </ul>
        </div>
    </aside>
    
    
    <div class="main main-shift">
        
        <header class="header">
            <a data-i18n="sidebar-toggle-button" class="sidebar-toggle-button" href="#/" onclick="toggle_sidebar();"><img class="img-icon" src="/mwiki/static/hamburger-menu.svg" style="height: 25px;"/> </a>
            <a data-i18n="home-page-button" class="sidebar-toggle-button" 
			   title="Go to home page (Index)" href="/mwiki/"><img class="img-icon" src="/mwiki/static/icon-home.svg"></a>
            <div class="dropdown">
              <a data-i18n="main-menu" class="button-toggle-menu sidebar-toggle-button" 
                 href="#" 
                 title="Main menu."
                 class="dropbtn"
                 >
                <img class="header-icon img-icon" src="data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M4%204C2.89%204%202%204.89%202%206V18A2%202%200%200%200%204%2020H20A2%202%200%200%200%2022%2018V8C22%206.89%2021.1%206%2020%206H12L10%204H4M4%208H20V18H4V8M7%2022V24H9V22H7M11%2022V24H13V22H11M15%2022V24H17V22H15%22%20%2F%3E%3C%2Fsvg%3E">
                </a>
                
            <div class="menu-dropdown-content menu-hidden" onclick="menuClicked(event)">
                  <a data-i18n="menu-item-print-label" class="sidebar-toggle-button"
                     href="#" onclick="printPage();"
                     title="Print current page or export it to PDF." >Print</a>
                
                <a data-i18n="show-source-menu-item-label" class="sidebar-toggle-button"
                    href="#" onclick="displayPageSourceWindow();">Show source</a>
                
                
                 <a data-i18n="popup-window-change-language-menu-launcher" class="sidebar-toggle-button" href="#"
                    onclick="changeLanguageForm.toggle();"
                    title="Open form that allows overriding the current user interface language."
                 >Language</a>
                
                   <a data-i18n="keybindings-menu-item" class="sidebar-toggle-button" href="#"
                    onclick="toggleShortcutKeybindingWinodw();"
                    title="Display a window showing all keyboard shortcuts, also known as keybindings."
                 >Keybindings</a>
                 <a data-i18n="about-menu-item-label" class="sidebar-toggle-button" href="/mwiki/about.html">About</a>
              </div>
            </div>

            <a data-i18n="button-toggle-sections" class="sidebar-toggle-button"
                 href="#" 
                 onclick="toggleHeadings();"
                 id="btn-scroll-bottom" 
                 title="Fold/Unfold all sections."
                 ><img class="img-icon" src="/mwiki/static/dots-vertical.svg"></a> 
            <a data-i18n="menu-item-print-icon"
                class="sidebar-toggle-button" 
        			  title="Print current page or export it to PDF."
                href="#"
                onclick="printPage();">
                <img class="img-icon" src="/mwiki/static/printer-outline.svg">
            </a>
                
            <!-- 
             <a data-i18n="button-quick-switch-to-page" class="sidebar-toggle-button" 
                 href="#" 
                 onclick="quickOpenPage();"
                 id="btn-scroll-bottom" 
                 title="Quick switch to page. Open a window that allows switching to Wiki page by typing its name or search all pages for the user entry."
                 >
               <img class="img-icon" src="data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M9.5%2C3A6.5%2C6.5%200%200%2C1%2016%2C9.5C16%2C11.11%2015.41%2C12.59%2014.44%2C13.73L14.71%2C14H15.5L20.5%2C19L19%2C20.5L14%2C15.5V14.71L13.73%2C14.44C12.59%2C15.41%2011.11%2C16%209.5%2C16A6.5%2C6.5%200%200%2C1%203%2C9.5A6.5%2C6.5%200%200%2C1%209.5%2C3M9.5%2C5C7%2C5%205%2C7%205%2C9.5C5%2C12%207%2C14%209.5%2C14C12%2C14%2014%2C12%2014%2C9.5C14%2C7%2012%2C5%209.5%2C5Z%22%20%2F%3E%3C%2Fsvg%3E"> 
                </a>
            --> 
              
        </header>
        

        <main class="content">
            
            <div class="div-heading-h1">
                <h1 data-i18n="" class="document-heading">Linux Magic SysRq Key and OOM</h1>
            </div>
            
            <p class="hidden-mathjax-macros" style="display: none;">
                $$
                
                $$
            </p>
            

<div class="div-heading"> 
<h2 id="H_Overview" class="document-heading anchor">Overview <a class="link-heading" href="#H_Overview">¶</a></h2> 
<a data-i18n="edit-section-button" class="link-edit" style="display:none" href="/edit/Linux_SysRq_Key_and_OOM_System_Recovery?start=7&end=13&anchor=H_Overview&page=Linux SysRq Key and OOM System Recovery&timestamp=176064157279865" title="[i18n]: Overview" class="edit-button"><img class="img-icon" src="/static/pencil.svg"></a>
</div>
<hr class="line-under-heading">

<p>
Unlike MacOSX and Microsoft Windows NT, the Linux kernel and consequentely, Linux distributions still have an OOM - Out-Of-Memory bug, which freezes the computer and makes it unresponsive when almost all memory is used. This issue is annoying as even the keyboard becomes unresponsive and key combination similar to Windows' Ctrl+Al+Del for invoking a process manager does not work.
</p>

<p>
For many users, the solution is a forced system reboot. However, it may lead to data loss, data corruption and loss of productivity. An alternative to system reboot is the Linux's kernel <strong>magic SysReq</strong> key combination, which is available in Linux kenels compiled with CONFIG_MAGIC_SYSREQ option enabled. Nowadays, most Linux distributions are shipped with a kernel using this option enabled. In order to  use SysReq keyboard shortcut for system recovery, it is necessary to enable it either temporarily or permanently by editing the appropriate configuration file.
</p>

<div class="div-heading"> 
<h2 id="H_SysRq_Settings" class="document-heading anchor">SysRq Settings <a class="link-heading" href="#H_SysRq_Settings">¶</a></h2> 
<a data-i18n="edit-section-button" class="link-edit" style="display:none" href="/edit/Linux_SysRq_Key_and_OOM_System_Recovery?start=13&end=55&anchor=H_SysRq_Settings&page=Linux SysRq Key and OOM System Recovery&timestamp=176064157279865" title="[i18n]: SysRq Settings" class="edit-button"><img class="img-icon" src="/static/pencil.svg"></a>
</div>
<hr class="line-under-heading">

<div class="div-heading"> 
<h3 id="H_Check_whether_SysRq_status" class="document-heading anchor">Check whether SysRq status <a class="link-heading" href="#H_Check_whether_SysRq_status">¶</a></h3> 
<a data-i18n="edit-section-button" class="link-edit" style="display:none" href="/edit/Linux_SysRq_Key_and_OOM_System_Recovery?start=15&end=26&anchor=H_Check_whether_SysRq_status&page=Linux SysRq Key and OOM System Recovery&timestamp=176064157279865" title="[i18n]: Check whether SysRq status" class="edit-button"><img class="img-icon" src="/static/pencil.svg"></a>
</div>

<p>
To check whether SysRq is eanabled, run
</p>

<pre>
<code class="language-sh"><div class="highlight"><pre><span></span>$<span class="w"> </span>cat<span class="w"> </span>/proc/sys/kernel/sysrq
<span class="m">1</span>
</pre></div>
</code>
</pre>

<p>
if the output is 0, then sysrq is disabled, otherwise sysrq is enabled. All sysrq functions are only enabled when this pseudo-file, created by the Linux kernel, is set to 1.
</p>

<div class="div-heading"> 
<h3 id="H_Set_SySrq_Value_without_reboot" class="document-heading anchor">Set SySrq Value without reboot <a class="link-heading" href="#H_Set_SySrq_Value_without_reboot">¶</a></h3> 
<a data-i18n="edit-section-button" class="link-edit" style="display:none" href="/edit/Linux_SysRq_Key_and_OOM_System_Recovery?start=26&end=40&anchor=H_Set_SySrq_Value_without_reboot&page=Linux SysRq Key and OOM System Recovery&timestamp=176064157279865" title="[i18n]: Set SySrq Value without reboot" class="edit-button"><img class="img-icon" src="/static/pencil.svg"></a>
</div>

<p>
Enable all SysRq options/functions.
</p>

<pre>
<code class="language-sh"><div class="highlight"><pre><span></span>$<span class="w"> </span>sudo<span class="w"> </span>sysctl<span class="w"> </span>kernel.sysrq<span class="o">=</span><span class="m">1</span>
</pre></div>
</code>
</pre>

<p>
All SysRq options can be enabled by setting the pseudo-file (a kernel interface) using the command.
</p>

<pre>
<code class="language-sh"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/proc/sys/kernel/sysrq
</pre></div>
</code>
</pre>

<div class="div-heading"> 
<h3 id="H_Persist_SysRq_Value_on_Reboot" class="document-heading anchor">Persist SysRq Value on Reboot <a class="link-heading" href="#H_Persist_SysRq_Value_on_Reboot">¶</a></h3> 
<a data-i18n="edit-section-button" class="link-edit" style="display:none" href="/edit/Linux_SysRq_Key_and_OOM_System_Recovery?start=40&end=55&anchor=H_Persist_SysRq_Value_on_Reboot&page=Linux SysRq Key and OOM System Recovery&timestamp=176064157279865" title="[i18n]: Persist SysRq Value on Reboot" class="edit-button"><img class="img-icon" src="/static/pencil.svg"></a>
</div>

<p>
Create backup of the configuration file.
</p>

<pre>
<code class="language-sh"><div class="highlight"><pre><span></span>$<span class="w"> </span>sudo<span class="w"> </span>cp<span class="w"> </span>/etc/sysctl.d/99-sysctl.conf<span class="w"> </span>-v<span class="w"> </span>/etc/sysctl.d/99-sysctl.conf.back
</pre></div>
</code>
</pre>

<p>
Override the file 99-sysctl.conf with the line <code>kernel.sysrq = 1</code>.
</p>

<pre>
<code class="language-sh"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;kernel.sysrq = 1&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/sysctl.d/99-sysctl.conf
</pre></div>
</code>
</pre>

<div class="div-heading"> 
<h2 id="H_Commands" class="document-heading anchor">Commands <a class="link-heading" href="#H_Commands">¶</a></h2> 
<a data-i18n="edit-section-button" class="link-edit" style="display:none" href="/edit/Linux_SysRq_Key_and_OOM_System_Recovery?start=55&end=97&anchor=H_Commands&page=Linux SysRq Key and OOM System Recovery&timestamp=176064157279865" title="[i18n]: Commands" class="edit-button"><img class="img-icon" src="/static/pencil.svg"></a>
</div>
<hr class="line-under-heading">

<p>
SysRq key-combination provide the following commands.
</p>

<ul class="">
<li>
b – reboots the computer 
</li>
<li>
e – ask all processes to terminate gracefully 
</li>
<li>
f – to get rid of an <a href="https://en.wikipedia.org/wiki/Out_of_memory"  target="_blank" title="Out Of Memory Condition" class="link-external" rel="noreferrer noopener nofollow" >Out Of Memory condition</a> via oom_kills 
</li>
<li>
i – to kill all processes immediately except init 
</li>
<li>
k – to kill absolutely all processes, including X 
</li>
<li>
m – to output the current memory information 
</li>
<li>
o – to shut down the computer 
</li>
<li>
r – very useful, to take the keyboard out of the X server control 
</li>
<li>
s – to sync data from all mounted devices (avoid data loss in case of violent reboot) 
</li>
<li>
t – to display a list of the current tasks 
</li>
<li>
u – to remount all file system in read-only mode 
</li>
</ul>

<div class="div-heading"> 
<h3 id="H_Unfreeze_Computer_in_OOM" class="document-heading anchor">Unfreeze Computer in OOM <a class="link-heading" href="#H_Unfreeze_Computer_in_OOM">¶</a></h3> 
<a data-i18n="edit-section-button" class="link-edit" style="display:none" href="/edit/Linux_SysRq_Key_and_OOM_System_Recovery?start=72&end=78&anchor=H_Unfreeze_Computer_in_OOM&page=Linux SysRq Key and OOM System Recovery&timestamp=176064157279865" title="[i18n]: Unfreeze Computer in OOM" class="edit-button"><img class="img-icon" src="/static/pencil.svg"></a>
</div>

<p>
Unfreeze computer in OOM (Out-Of-Memory) by terminating memory hogging processes.
</p>

<ul class="">
<li>
<strong>SysRq + Alt + f</strong> 
</li>
</ul>

<div class="div-heading"> 
<h3 id="H_Safe_System_Reboot" class="document-heading anchor">Safe System Reboot <a class="link-heading" href="#H_Safe_System_Reboot">¶</a></h3> 
<a data-i18n="edit-section-button" class="link-edit" style="display:none" href="/edit/Linux_SysRq_Key_and_OOM_System_Recovery?start=78&end=97&anchor=H_Safe_System_Reboot&page=Linux SysRq Key and OOM System Recovery&timestamp=176064157279865" title="[i18n]: Safe System Reboot" class="edit-button"><img class="img-icon" src="/static/pencil.svg"></a>
</div>

<p>
Safe system reboot with graceful termination of processes for avoiding data loss and file system damage.
</p>

<ul class="">
<li>
<strong>Alt + SysRq + reisub</strong> 
</li>
</ul>

<p>
This keybinding peforms the following sequence of operations.
</p>

<ul class="">
<li>
(r) - Take the keyboard from X 
</li>
<li>
(e) - Ask all programs to end gently 
</li>
<li>
(i) Kill the one who did not 
</li>
<li>
(s) - Save the data from the cache to the hard drive 
</li>
<li>
(u) - Remounts the file systems 
</li>
<li>
(b) - Reboot 
</li>
</ul>

<p>
reisub meneumonic:
</p>

<ul class="">
<li>
opposite of "busier" 
</li>
<li>
"[R]aising an [E]lephant is so [U]tterly [B]oring" 
</li>
</ul>

<div class="div-heading"> 
<h2 id="H_See" class="document-heading anchor">See <a class="link-heading" href="#H_See">¶</a></h2> 
<a data-i18n="edit-section-button" class="link-edit" style="display:none" href="/edit/Linux_SysRq_Key_and_OOM_System_Recovery?start=97&end=end&anchor=H_See&page=Linux SysRq Key and OOM System Recovery&timestamp=176064157279865" title="[i18n]: See" class="edit-button"><img class="img-icon" src="/static/pencil.svg"></a>
</div>
<hr class="line-under-heading">

<ul class="">
<li>
<em>Linux Magic System Request Key Hacks</em>, Kernel.org <ul class="">
<li>
<a href="https://www.kernel.org/doc/html/latest/admin-guide/sysrq.html"  target="_blank"  class="link-external" rel="noreferrer noopener nofollow" >https://www.kernel.org/doc/html/latest/admin-guide/sysrq.html</a> 
</li>
</ul>
</li>
<li>
<em>How to enable all SysRq functions on Linux</em>, Linux Config (2020) <ul class="">
<li>
<a href="https://linuxconfig.org/how-to-enable-all-sysrq-functions-on-linux"  target="_blank"  class="link-external" rel="noreferrer noopener nofollow" >https://linuxconfig.org/how-to-enable-all-sysrq-functions-on-linux</a> 
</li>
</ul>
</li>
<li>
<em>Understanding the SysRq Key – The Magic Key To Control Linux</em>, MakeTechEasier (2012) <ul class="">
<li>
<a href="https://www.maketecheasier.com/the-usage-of-sysrq-key-in-linux/"  target="_blank"  class="link-external" rel="noreferrer noopener nofollow" >https://www.maketecheasier.com/the-usage-of-sysrq-key-in-linux/</a> 
</li>
</ul>
</li>
<li>
<em>What is /proc/sysrq-trigger in linux and how to use sysrq kernel feature ?</em> <ul class="">
<li>
<a href="https://ngelinux.com/what-is-proc-sysrq-trigger-in-linux-and-how-to-use-sysrq-kernel-feature/"  target="_blank"  class="link-external" rel="noreferrer noopener nofollow" >https://ngelinux.com/what-is-proc-sysrq-trigger-in-linux-and-how-to-use-sysrq-kernel-feature/</a> 
</li>
</ul>
</li>
<li>
<em>Use the Magic SysRq Key on Linux to Fix Frozen X Servers, Cleanly Reboot, and Run Other Low-Level Commands</em>, Chris Hoffman, How-To Geek (2012) <ul class="">
<li>
<a href="https://www.howtogeek.com/119127/use-the-magic-sysrq-key-on-linux-to-fix-frozen-x-servers-cleanly-reboot-and-run-other-low-level-commands/"  target="_blank"  class="link-external" rel="noreferrer noopener nofollow" >https://www.howtogeek.com/119127/use-the-magic-sysrq-key-on-linux-to-fix-frozen-x-servers-cleanly-reboot-and-run-other-low-level-commands/</a> 
</li>
</ul>
</li>
</ul>


        </main>

        
    </div>
    <script>
    </script>

</body>

</html>